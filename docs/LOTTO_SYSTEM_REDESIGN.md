# VIEW ë¡œë˜ ì‹œìŠ¤í…œ ì „ì²´ ê²€í†  ë° ì¬ì„¤ê³„

## ğŸ“‹ í˜„ì¬ ìƒíƒœ ë¶„ì„

### 1. ë¡œë˜ í‹°ì¼“ ìŠ¤ìº” (Jackpot.tsx)

#### í˜„ì¬ êµ¬í˜„
| í•­ëª© | í˜„ì¬ ìƒíƒœ | ë¬¸ì œì  |
|------|----------|--------|
| OCR ì—”ì§„ | Tesseract.js (í´ë¼ì´ì–¸íŠ¸) + Cloud Vision API (ì„œë²„, ë¯¸ë°°í¬) | ì¸ì‹ë¥  ë‚®ìŒ |
| ê²Œì„ ì¸ì‹ | 6ê°œ ìˆ«ìë§Œ ì¸ì‹ | âŒ 5ê²Œì„(5ì¤„) ì¸ì‹ ì•ˆí•¨ |
| ë°ì´í„° ì €ì¥ | numbers[], imageUrl ì €ì¥ | âŒ ì´ë¯¸ì§€ ì €ì¥ ë¶ˆí•„ìš” |
| ê²Œì„ ì„ íƒ | ì—†ìŒ | âŒ ì „ì²´/ê°œë³„ ì„ íƒ ë¶ˆê°€ |

#### í•„ìš”í•œ ë³€ê²½
```
í˜„ì¬: í‹°ì¼“ â†’ ìŠ¤ìº” â†’ 6ê°œ ìˆ«ì ì¶”ì¶œ â†’ ë“±ë¡
ê°œì„ : í‹°ì¼“ â†’ ìŠ¤ìº” â†’ 5ê²Œì„ ì¶”ì¶œ â†’ ê²Œì„ë³„ ì„ íƒ â†’ ë“±ë¡
```

---

### 2. í‹°ì¼“ ë°ì´í„° êµ¬ì¡° (types.ts)

#### í˜„ì¬ êµ¬ì¡°
```typescript
export interface JackpotEntry {
  id: string;
  numbers: number[];           // ë‹¨ì¼ ê²Œì„ë§Œ ì§€ì›
  drawDate: string;
  status: 'Processing' | 'Registered' | 'Won' | 'Lost';
  imageUrl: string;            // ì´ë¯¸ì§€ ì €ì¥ (ë¶ˆí•„ìš”)
  potentialReward?: number;
}
```

#### ê°œì„ ëœ êµ¬ì¡°
```typescript
export interface LottoGame {
  gameNumber: number;          // ê²Œì„ ë²ˆí˜¸ (A~E ë˜ëŠ” 1~5)
  numbers: number[];           // 6ê°œ ë²ˆí˜¸
  status: 'pending' | 'won' | 'lost';
  matchCount?: number;         // ëª‡ ê°œ ì¼ì¹˜
  prize?: number;              // ë‹¹ì²¨ê¸ˆ
}

export interface LottoTicket {
  id: string;
  ticketId: string;            // í‹°ì¼“ ê³ ìœ ë²ˆí˜¸ (QRì—ì„œ ì¶”ì¶œ ë˜ëŠ” ìë™ìƒì„±)
  drawRound: number;           // ë¡œë˜ íšŒì°¨
  drawDate: string;            // ì¶”ì²¨ì¼
  games: LottoGame[];          // 5ê°œ ê²Œì„
  status: 'pending' | 'checked' | 'won' | 'lost';
  registeredAt: Timestamp;
  scannedAt: Timestamp;
  totalPrize?: number;         // ì´ ë‹¹ì²¨ê¸ˆ
}
```

---

### 3. Firestore êµ¬ì¡°

#### í˜„ì¬ êµ¬ì¡°
```
users/{uid}/tickets/{ticketId}
â”œâ”€â”€ numbers: [1, 5, 12, 23, 34, 45]
â”œâ”€â”€ drawDate: "ì´ë²ˆ ì£¼ í† ìš”ì¼"
â”œâ”€â”€ status: "Registered"
â”œâ”€â”€ imageUrl: "base64..."   â† ë¶ˆí•„ìš”, ìš©ëŸ‰ ë‚­ë¹„
â””â”€â”€ createdAt: Timestamp
```

#### ê°œì„ ëœ êµ¬ì¡°
```
users/{uid}/lottoTickets/{ticketId}
â”œâ”€â”€ ticketId: "AUTO_12345" ë˜ëŠ” "QR_98765"
â”œâ”€â”€ drawRound: 1127
â”œâ”€â”€ drawDate: "2024-12-21"
â”œâ”€â”€ games: [
â”‚   { gameNo: 1, numbers: [1, 5, 12, 23, 34, 45], status: "pending" },
â”‚   { gameNo: 2, numbers: [3, 8, 15, 27, 38, 42], status: "pending" },
â”‚   ...
â”‚ ]
â”œâ”€â”€ status: "pending"
â”œâ”€â”€ registeredAt: Timestamp
â””â”€â”€ cost: 5  (ë“±ë¡ ë¹„ìš©)

lottoRounds/{roundNumber}
â”œâ”€â”€ drawDate: "2024-12-21"
â”œâ”€â”€ winningNumbers: [5, 12, 23, 34, 38, 42]
â”œâ”€â”€ bonusNumber: 17
â”œâ”€â”€ status: "drawn" | "announced" | "distributed"
â”œâ”€â”€ prizePool: { rank1: 0, rank2: 350000, ... }
â””â”€â”€ announceAt: Timestamp
```

---

### 4. BTC ì˜ˆì¸¡ ê²Œì„ vs ë¡œë˜ ê²Œì„ ë¹„êµ

| í•­ëª© | BTC ì˜ˆì¸¡ ê²Œì„ | ë¡œë˜ ê²Œì„ |
|------|--------------|----------|
| ìœ„ì¹˜ | Reward íƒ­ (4ë²ˆì§¸) | Jackpot íƒ­ â†’ "ë¡œë˜" íƒ­ (3ë²ˆì§¸) |
| ë² íŒ… | VIEW í† í° | VIEW í† í° (5 VIEW/í‹°ì¼“) |
| ê²Œì„ ì£¼ê¸° | ë§¤ì¼ | ë§¤ì£¼ í† ìš”ì¼ |
| ë‹¹ì²¨ ë°©ì‹ | ê°€ê²© ë²”ìœ„ ì˜ˆì¸¡ | ë²ˆí˜¸ ì¼ì¹˜ (ë™í–‰ë³µê¶Œ ë£°) |
| ì­íŒŸ | ì •í™•í•œ ê°€ê²© ë§ì¶”ê¸° | 1ë“± ë‹¹ì²¨ |

---

### 5. ë‹¹ì²¨ê¸ˆ ê³„ì‚° ë¡œì§ (í˜„ì¬ ë¯¸êµ¬í˜„)

#### ë™í–‰ë³µê¶Œ ë¡œë˜ ë“±ìœ„
| ë“±ìœ„ | ì¡°ê±´ | ë‹¹ì²¨ í™•ë¥  |
|------|------|----------|
| 1ë“± | 6ê°œ ì¼ì¹˜ | 1/8,145,060 |
| 2ë“± | 5ê°œ + ë³´ë„ˆìŠ¤ | 1/1,357,510 |
| 3ë“± | 5ê°œ ì¼ì¹˜ | 1/35,724 |
| 4ë“± | 4ê°œ ì¼ì¹˜ | 1/733 |
| 5ë“± | 3ê°œ ì¼ì¹˜ | 1/45 |

#### VIEW ë¡œë˜ ë‹¹ì²¨ê¸ˆ êµ¬ì¡° (ì œì•ˆ)
```
ì´ POOL = ë“±ë¡ëœ í‹°ì¼“ ìˆ˜ Ã— 5 VIEW

ë°°ë¶„:
- í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ: 10%
- 1ë“± í’€: 40% (ì´ì›” ê°€ëŠ¥)
- 2ë“± í’€: 20%
- 3ë“± í’€: 15%
- 4ë“± í’€: 10%
- 5ë“± í’€: 5%
```

---

## ğŸ”§ ê°œë°œ ê³„íš

### Phase 1: ë°ì´í„° êµ¬ì¡° ë¦¬íŒ©í† ë§
1. `LottoTicket`, `LottoGame` ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
2. Firestore ì»¬ë ‰ì…˜ êµ¬ì¡° ë³€ê²½
3. `registerTicket` â†’ `registerLottoTicket` í•¨ìˆ˜ ë¦¬íŒ©í† ë§

### Phase 2: OCR ê°œì„  (5ê²Œì„ ì¸ì‹)
1. Cloud Vision API SDK ì„¤ì¹˜
2. `extractLottoNumbers` í•¨ìˆ˜ ìˆ˜ì • (5ê²Œì„ íŒŒì‹±)
3. í•œêµ­ ë¡œë˜ í‹°ì¼“ ë ˆì´ì•„ì›ƒ ë¶„ì„ ë¡œì§ ì¶”ê°€

### Phase 3: UI ì¬ì„¤ê³„
1. ìŠ¤ìº” í›„ 5ê²Œì„ í‘œì‹œ UI
2. ê²Œì„ë³„ ì„ íƒ ì²´í¬ë°•ìŠ¤
3. ì „ì²´ ì„ íƒ/í•´ì œ ê¸°ëŠ¥
4. í™•ì¸ í›„ ë“±ë¡ í”Œë¡œìš°

### Phase 4: ë‹¹ì²¨ í™•ì¸ ì‹œìŠ¤í…œ
1. `lottoRounds` ì»¬ë ‰ì…˜ ê´€ë¦¬ Cloud Functions
2. ë§¤ì£¼ í† ìš”ì¼ ìë™ ë‹¹ì²¨ í™•ì¸ ìŠ¤ì¼€ì¤„ëŸ¬
3. ë‹¹ì²¨ê¸ˆ ê³„ì‚° ë° ë°°ë¶„ ë¡œì§

---

## ğŸ“± í”Œë«í¼ í˜¸í™˜ì„±

### Cloud Vision API í†µí•©

| í”Œë«í¼ | ë°©ì‹ | í˜¸í™˜ì„± |
|--------|------|--------|
| ëª¨ë°”ì¼ ì›¹ | Firebase Functions í˜¸ì¶œ | âœ… ì™„ì „ í˜¸í™˜ |
| iOS ì•± (Capacitor) | Firebase Functions í˜¸ì¶œ | âœ… ì™„ì „ í˜¸í™˜ |
| Android ì•± (Capacitor) | Firebase Functions í˜¸ì¶œ | âœ… ì™„ì „ í˜¸í™˜ |

### ì œì•½ ìš”ì†Œ

| ì œì•½ | ì˜í–¥ | í•´ê²°ì±… |
|------|------|--------|
| Cloud Vision API ë¹„ìš© | $1.50/1,000 ìš”ì²­ | ì›” ì˜ˆì‚° ì„¤ì • |
| ì´ë¯¸ì§€ ì „ì†¡ ëŒ€ì—­í­ | 1024px ë¦¬ì‚¬ì´ì¦ˆë¡œ ~200KB | ì´ë¯¸ êµ¬í˜„ë¨ |
| ì˜¤í”„ë¼ì¸ ì‚¬ìš© | ë¶ˆê°€ | Tesseract.js í´ë°± |
| í•œê¸€ OCR ì •í™•ë„ | ìˆ«ì ìœ„ì£¼ë¼ ì˜í–¥ ì ìŒ | ìˆ«ìë§Œ ì¶”ì¶œ |

---

## ğŸ“ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ (Phase 1-2)
- [ ] `types.ts`ì— `LottoTicket`, `LottoGame` ì¶”ê°€
- [ ] `registerLottoTicket` Cloud Function êµ¬í˜„
- [ ] Cloud Vision SDK ì„¤ì¹˜ (`@google-cloud/vision`)
- [ ] 5ê²Œì„ íŒŒì‹± ë¡œì§ êµ¬í˜„
- [ ] UIì— 5ê²Œì„ ì„ íƒ í™”ë©´ ì¶”ê°€

### ì¤‘ìš” (Phase 3)
- [ ] í‹°ì¼“í•¨ UI ê°œì„  (ê²Œì„ë³„ í‘œì‹œ)
- [ ] ë‹¹ì²¨ í™•ì¸ ìŠ¤ì¼€ì¤„ëŸ¬
- [ ] ë‹¹ì²¨ê¸ˆ ë°°ë¶„ ë¡œì§

### ì„ íƒ (Phase 4)
- [ ] QR ì½”ë“œ ì¸ì‹ (ë°”ì½”ë“œ ìŠ¤ìºë„ˆ)
- [ ] ë‹¹ì²¨ ì•Œë¦¼ í‘¸ì‹œ
- [ ] ë‹¹ì²¨ í†µê³„ ëŒ€ì‹œë³´ë“œ

---

## ğŸ”„ í•œêµ­ ë¡œë˜ í‹°ì¼“ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íšŒì°¨: 1127íšŒ | ì¶”ì²¨ì¼: 2024.12.21 (í† )     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  A  01  05  12  23  34  45                  â”‚
â”‚  B  03  08  15  27  38  42                  â”‚
â”‚  C  07  14  21  28  35  43                  â”‚
â”‚  D  02  11  19  26  33  41                  â”‚
â”‚  E  04  09  16  24  31  44                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [QR CODE]      ë°œí–‰ê¸ˆì•¡: 5,000ì›           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### OCR íŒŒì‹± ì „ëµ
1. ì „ì²´ í…ìŠ¤íŠ¸ ì¶”ì¶œ
2. A~E ë˜ëŠ” 1~5 ê²Œì„ ì‹ë³„ì ì°¾ê¸°
3. ê° ì¤„ì—ì„œ 1~45 ìˆ«ì 6ê°œì”© ì¶”ì¶œ
4. ìœ íš¨ì„± ê²€ì‚¬ (ì¤‘ë³µ ë²ˆí˜¸ í™•ì¸)

---

*Last Updated: 2024-12-19*
