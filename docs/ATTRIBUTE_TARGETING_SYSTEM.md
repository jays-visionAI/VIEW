# VIEW Attribute Targeting System

## ê°œìš”

VIEW Attribute Targeting Systemì€ ì‚¬ìš©ìì˜ í–‰ë™ ë°ì´í„°ì™€ ì„¤ë¬¸ ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ì†ì„± ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³ , ì´ë¥¼ í™œìš©í•˜ì—¬ AI ê¸°ë°˜ ê´‘ê³  íƒ€ê²ŸíŒ…ì„ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           VIEW Platform                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  User App   â”‚â”€â”€â”€â”€â–¶â”‚  Firestore  â”‚â—€â”€â”€â”€â”€â”‚  Cloud Functions    â”‚    â”‚
â”‚  â”‚  (Mobile/Web)â”‚     â”‚  Database   â”‚     â”‚  (Backend Logic)    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                       â”‚                 â”‚
â”‚         â–¼                   â–¼                       â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Surveys    â”‚     â”‚  Taxonomy   â”‚     â”‚  AI Recommendation  â”‚    â”‚
â”‚  â”‚  Activities â”‚     â”‚  YAML Configâ”‚     â”‚  Engine             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Advertiser Portal                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Create     â”‚     â”‚  Audience   â”‚     â”‚  Campaign           â”‚    â”‚
â”‚  â”‚  Campaign   â”‚     â”‚  Targeting  â”‚     â”‚  Notifications      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. Taxonomy System

#### íŒŒì¼ êµ¬ì¡°
```
/VIEW
â”œâ”€â”€ taxonomy_v1.yaml          # Industry + Attribute í†µí•© ì •ì˜
â””â”€â”€ functions/src/index.ts    # Taxonomy ê´€ë¦¬ API
```

#### Industry ì¹´í…Œê³ ë¦¬ (10ê°œ)
- Fashion, Beauty, Technology, Food_Beverage, Travel
- Finance, Health_Wellness, Education, Entertainment, Home_Living

#### Attribute ì¹´í…Œê³ ë¦¬ (6ê°œ)
- **Price_Positioning**: Mass, Value, Mid, Premium, Luxury
- **Sustainability**: Eco_Friendly, Vegan, Fair_Trade, Cruelty_Free, Organic
- **Business_Model**: DTC, Subscription, Marketplace, C2C, Rental
- **Channel_Preference**: Online_First, Mobile_First, Omnichannel, Social_Commerce
- **Brand_Identity**: Heritage, Innovator, Challenger, Niche
- **Purchase_Decision_Style**: Brand_Loyal, Deal_Seeker, Trend_Seeker, Impulse

---

### 2. Attribute Score Calculation

#### íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸
| íŠ¸ë¦¬ê±° | í•¨ìˆ˜ëª… | ì„¤ëª… |
|--------|--------|------|
| ìˆ˜ë™ | `calculateAttributeScores` | ì‚¬ìš©ì ìš”ì²­ ì‹œ ê³„ì‚° |
| ìŠ¤ì¼€ì¤„ | `scheduleAttributeScoreUpdate` | ë§¤ì¼ 3AM UTC ìë™ ì‹¤í–‰ |
| ì„¤ë¬¸ ì™„ë£Œ | `onSurveyCompleted` | í•µì‹¬ ì„¤ë¬¸ ì™„ë£Œ ì‹œ ìë™ ê³„ì‚° |
| í™œë™ ë§ˆì¼ìŠ¤í†¤ | `onActivityMilestone` | 10/50/100/200/500 í™œë™ ë„ë‹¬ ì‹œ |
| ê´€ë¦¬ì | `batchRecalculateAttributeScores` | ì¼ê´„ ì¬ê³„ì‚° |

#### ì ìˆ˜ ê³„ì‚° ë¡œì§
```typescript
// ì„¤ë¬¸ ì‘ë‹µ â†’ ì†ì„± ë§¤í•‘
'spending.luxury_fashion' â†’ Price_Positioning.Luxury: +0.8
'values.eco_friendly'     â†’ Sustainability.Eco_Friendly: +0.9
'purchase.online_always'  â†’ Channel_Preference.Online_First: +1.0

// í™œë™ ë°ì´í„° â†’ ë³´ì •
brandLoyalty > 0.7 â†’ Purchase_Decision_Style.Brand_Loyal: +0.7
impulseBuying > 0.6 â†’ Purchase_Decision_Style.Impulse: +0.6
```

#### ë°ì´í„° êµ¬ì¡°
```
Firestore:
users/{uid}/persona/current
â”œâ”€â”€ attributeScores: {
â”‚   "Price_Positioning.Premium": 0.75,
â”‚   "Sustainability.Eco_Friendly": 0.82,
â”‚   "Channel_Preference.Online_First": 0.90
â”‚ }
â”œâ”€â”€ attributeScoresUpdatedAt: Timestamp
â””â”€â”€ ...

users/{uid}
â”œâ”€â”€ topAttributes: ["Price_Positioning.Premium", "Sustainability.Eco_Friendly", ...]
â””â”€â”€ attributeScoresCount: 8
```

---

### 3. AI Recommendation Engine

#### getAttributeRecommendations API
```typescript
// ìš”ì²­
{
    industryPaths: ['Fashion.Apparel', 'Beauty.Skincare'],
    objective: 'conversion',  // or 'awareness'
    budget: 100000,
    existingCampaignId?: 'abc123'  // ê¸°ì¡´ ìº í˜ì¸ ìµœì í™”
}

// ì‘ë‹µ
{
    success: true,
    recommendations: [
        {
            attribute: "Price_Positioning.Premium",
            type: "Price_Positioning",
            value: "Premium",
            score: 85,
            reason: "ë†’ì€ ì „í™˜ìœ¨ 15.2% ê¸°ë¡",
            estimatedReach: 3200,
            estimatedCVR: 15.2,
            priority: "high"
        }
    ],
    optimization?: {
        currentPerformance: {...},
        suggestedChanges: [...],
        potentialImprovement: 25
    }
}
```

#### ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜
```
Score = Base(50) + Performance + Reach + Objective + Industry

1. Historical Performance (ìµœëŒ€ +40ì )
   - CVR Bonus: cvr Ã— 2
   - Volume Bonus: min(20, conversions Ã— 0.1)

2. User Availability (ìµœëŒ€ +15ì )
   - reachPercent Ã— 0.5

3. Objective Alignment (ê°€ì¤‘ì¹˜)
   - awareness: Channel_Preference 1.0, Business_Model 0.8
   - conversion: Price_Positioning 1.0, Purchase_Decision_Style 1.0

4. Industry Relevance (+20% bonus)
```

#### getAITargetingAssistant API (ìì—°ì–´)
```typescript
// ìš”ì²­
{
    productDescription: "ì¹œí™˜ê²½ ë¹„ê±´ ë·°í‹° ë¸Œëœë“œ...",
    targetAudience?: "20ëŒ€ ì—¬ì„±",
    goal: "conversion"
}

// ì‘ë‹µ
{
    suggestions: {
        industries: ["Beauty.Skincare"],
        attributes: {
            Price_Positioning: ["Premium"],
            Sustainability: ["Eco_Friendly", "Vegan"]
        },
        reasoning: "Beauty.Skincare ì‚°ì—…ìœ¼ë¡œ ë¶„ë¥˜..."
    }
}
```

---

### 4. Campaign Optimization Notifications

#### ì•Œë¦¼ ìœ í˜•
| Type | ì•„ì´ì½˜ | íŠ¸ë¦¬ê±° ì¡°ê±´ |
|------|--------|-------------|
| `warning` | âš ï¸ | CTR < 1%, CVR < 5%, CPA ê³¼ë‹¤ |
| `success` | ğŸ‰ | CVR â‰¥ 15% ë‹¬ì„± |
| `optimization` | ğŸ’¡ | AI íƒ€ê²ŸíŒ… ìµœì í™” ì œì•ˆ |
| `info` | â„¹ï¸ | ì˜ˆì‚° ì†Œì§„ ì†ë„ ì•Œë¦¼ |

#### ìë™ ë¶„ì„ ìŠ¤ì¼€ì¤„
- **ì£¼ê¸°**: 6ì‹œê°„ë§ˆë‹¤ (0 */6 * * *)
- **ëŒ€ìƒ**: status = 'active' ìº í˜ì¸
- **ë¶„ì„ ê¸°ê°„**: ìµœê·¼ 7ì¼ ë°ì´í„°

#### Firestore êµ¬ì¡°
```
advertisers/{uid}/notifications/{notificationId}
â”œâ”€â”€ type: 'warning' | 'success' | 'optimization' | 'info'
â”œâ”€â”€ title: string
â”œâ”€â”€ message: string
â”œâ”€â”€ priority: 'high' | 'medium' | 'low'
â”œâ”€â”€ suggestedAction: string
â”œâ”€â”€ campaignId: string
â”œâ”€â”€ campaignName: string
â”œâ”€â”€ read: boolean
â”œâ”€â”€ createdAt: Timestamp
â””â”€â”€ readAt?: Timestamp
```

---

## UI ì»´í¬ë„ŒíŠ¸

### 1. CreateCampaign AI íƒ€ê²ŸíŒ… ì–´ì‹œìŠ¤í„´íŠ¸
- ìì—°ì–´ ì…ë ¥ìœ¼ë¡œ íƒ€ê²ŸíŒ… ì œì•ˆ
- ì„ íƒí•œ ì‚°ì—… ê¸°ë°˜ ì†ì„± ì¶”ì²œ
- ì›í´ë¦­ ì¶”ì²œ ì ìš©

### 2. Profile Attribute ëŒ€ì‹œë³´ë“œ
- ì¹´í…Œê³ ë¦¬ë³„ ì†ì„± ì ìˆ˜ ì‹œê°í™”
- Top ì†ì„± íƒœê·¸ í‘œì‹œ
- ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„

### 3. Advertiser Notification Bell
- ì‹¤ì‹œê°„ ì•Œë¦¼ ì¹´ìš´íŠ¸ ë°°ì§€
- ë“œë¡­ë‹¤ìš´ ì•Œë¦¼ ëª©ë¡
- ì½ìŒ/ëª¨ë‘ ì½ìŒ ì²˜ë¦¬

---

## Cloud Functions ëª©ë¡

### Taxonomy ê´€ë¦¬
| í•¨ìˆ˜ | ì„¤ëª… |
|------|------|
| `getTaxonomy` | Taxonomy YAML ì¡°íšŒ |
| `updateTaxonomy` | Taxonomy ì—…ë°ì´íŠ¸ (Admin) |

### Attribute Score
| í•¨ìˆ˜ | ì„¤ëª… |
|------|------|
| `calculateAttributeScores` | ìˆ˜ë™ ì†ì„± ì ìˆ˜ ê³„ì‚° |
| `scheduleAttributeScoreUpdate` | ì¼ì¼ ìë™ ê³„ì‚° (3AM UTC) |
| `onSurveyCompleted` | ì„¤ë¬¸ ì™„ë£Œ íŠ¸ë¦¬ê±° |
| `onActivityMilestone` | í™œë™ ë§ˆì¼ìŠ¤í†¤ íŠ¸ë¦¬ê±° |
| `batchRecalculateAttributeScores` | ì¼ê´„ ì¬ê³„ì‚° (Admin) |

### AI ì¶”ì²œ
| í•¨ìˆ˜ | ì„¤ëª… |
|------|------|
| `getAttributeRecommendations` | AI ì†ì„± ì¶”ì²œ |
| `getAITargetingAssistant` | ìì—°ì–´ íƒ€ê²ŸíŒ… ì œì•ˆ |

### ì•Œë¦¼ ì‹œìŠ¤í…œ
| í•¨ìˆ˜ | ì„¤ëª… |
|------|------|
| `analyzeCampaignPerformance` | ìº í˜ì¸ ì„±ê³¼ ë¶„ì„ (6ì‹œê°„) |
| `getCampaignNotifications` | ì•Œë¦¼ ì¡°íšŒ |
| `markNotificationRead` | ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ |
| `triggerCampaignAnalysis` | ìˆ˜ë™ ë¶„ì„ íŠ¸ë¦¬ê±° (Admin) |

---

## ë°°í¬ ëª…ë ¹ì–´

```bash
# ì „ì²´ í•¨ìˆ˜ ë°°í¬
cd functions && npm run build
firebase deploy --only functions

# íŠ¹ì • í•¨ìˆ˜ ë°°í¬
firebase deploy --only functions:calculateAttributeScores,functions:getAttributeRecommendations

# Taxonomy ì´ˆê¸°í™”
firebase deploy --only functions:getTaxonomy,functions:updateTaxonomy
```

---

## í•„ìš” Firestore ì¸ë±ìŠ¤

```
campaigns (status, createdAt)
campaignAnalytics (campaignId, createdAt)
advertisers/{uid}/notifications (read, createdAt)
```

---

## í™˜ê²½ ë³€ìˆ˜

```env
# .env (functions/)
# Firebase ìë™ êµ¬ì„±
```

---

## í–¥í›„ ê°œì„  ì‚¬í•­

1. **LLM í†µí•©**: OpenAI/Gemini APIë¡œ ìì—°ì–´ ë¶„ì„ ê³ ë„í™”
2. **A/B í…ŒìŠ¤íŠ¸**: ì†ì„± ì¡°í•©ë³„ ì„±ê³¼ ë¹„êµ ì‹¤í—˜
3. **Lookalike Audience**: ìœ ì‚¬ ì‚¬ìš©ì ê·¸ë£¹ ìë™ ìƒì„±
4. **Real-time Bidding**: ì†ì„± ë§¤ì¹­ ê¸°ë°˜ ì‹¤ì‹œê°„ ì…ì°° ìµœì í™”

---

*Last Updated: 2024-12-19*
